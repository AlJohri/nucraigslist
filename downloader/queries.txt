http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/

var cursor = db.posts.find()
while (cursor.hasNext()) { var doc = cursor.next(); db.posts.update( {_id : doc._id}, {$set : {created_time : new Date(doc.created_time)}}); }

-----------------------------------------------------------------------

// Group posts by day of year

db.posts.aggregate([
  { $group: {
      _id: {
        dayOfYear: {$dayOfYear: "$created_time"},
        year: {$year: "$created_time"}
      },
      count: { $sum: 1 },
      first: {$min: "$created_time"}
    }
  },
  { $sort: {_id: -1}},
  { $project: { created_time: "$first", count: 1, _id: 0} }
]).toArray()

-----------------------------------------------------------------------

// Group by day of week

db.posts.aggregate([
  { $group: {
      _id: {
        dayOfWeek: {$dayOfWeek: "$created_time"}
      },
      count: { $sum: 1 },
      first: {$min: "$created_time"}
    }
  },
  { $sort: {_id: -1}},
  { $project: { created_time: {$dayOfWeek: "$first"}, count: 1, _id: 0} }
]).toArray()

-----------------------------------------------------------------------

// Group by month

db.posts.aggregate([
  { $group: {
      _id: {
        month: {$month: "$created_time"}
      },
      count: { $sum: 1 },
      first: {$min: "$created_time"}
    }
  },
  { $sort: {_id: -1}},
  { $project: { created_time: {$month: "$first"}, count: 1, _id: 0} }
]).toArray()